"use strict";angular.module("daiictSenTeam13App",["ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/profile",{templateUrl:"views/profile.html",controller:"ProfileCtrl",controllerAs:"profile"}).when("/register",{templateUrl:"views/register.html",controller:"RegisterCtrl",controllerAs:"register"}).when("/student",{templateUrl:"views/student.html",controller:"StudentCtrl",controllerAs:"student"}).when("/jobs",{templateUrl:"views/jobs.html",controller:"JobsCtrl",controllerAs:"jobs"}).when("/posting",{templateUrl:"views/posting.html",controller:"PostingCtrl",controllerAs:"posting"}).when("/application",{templateUrl:"views/application.html",controller:"ApplicationCtrl",controllerAs:"application"}).when("/faculty",{templateUrl:"views/faculty.html",controller:"FacultyCtrl",controllerAs:"faculty"}).when("/viewJob",{templateUrl:"views/viewjob.html",controller:"ViewjobCtrl",controllerAs:"viewJob"}).when("/chatRooms",{templateUrl:"views/chatrooms.html",controller:"ChatroomsCtrl",controllerAs:"chatRooms"}).when("/createChat",{templateUrl:"views/createchat.html",controller:"CreatechatCtrl",controllerAs:"createChat"}).when("/resetPassword",{templateUrl:"views/resetpassword.html",controller:"ResetpasswordCtrl",controllerAs:"resetPassword"}).when("/chat",{templateUrl:"views/chat.html",controller:"ChatCtrl",controllerAs:"chat"}).when("/people",{templateUrl:"views/people.html",controller:"PeopleCtrl",controllerAs:"people"}).when("/viewProfile",{templateUrl:"views/viewprofile.html",controller:"ViewprofileCtrl",controllerAs:"viewProfile"}).otherwise({redirectTo:"/"})}]),function(){angular.module("daiictSenTeam13App").controller("MainCtrl",["$scope","$location","$timeout","$rootScope",function(a,b,c,d){function e(){var c=new Firebase("https://sfip.firebaseio.com/users"),e=f.getAuth();c.orderByChild("email").equalTo(e.password.email).once("value",function(c){var e=c.val();for(var f in e){"professor"===e[f].type?(d.userType=!0,b.path("/faculty"),a.$apply()):"student"===e[f].type&&(d.userType=!1,b.path("/student"),a.$apply());break}})}var f=new Firebase("https://sfip.firebaseio.com/"),g=f.getAuth(),h=this;d.userType=null,a.loading=!0,a.loading=!1,a.email="",a.password="",g&&(console.log("Authenticated user with uid:",g.uid),e()),a.goToRegister=function(){b.path("/register")},h.goToReset=function(){b.path("/resetPassword")},h.login=function(){a.loading=!0,c(function(){a.$apply()}),f.authWithPassword({email:a.email,password:a.password},function(d,f){d?(a.password="",c(function(){a.$apply()}),a.loading=!1,Materialize.toast(d,4e3)):(console.log("Authenticated successfully with payload:",f),f.password.isTemporaryPassword?(a.loading=!1,b.path("/resetPassword"),c(function(){a.$apply()})):e())})}}])}(),angular.module("daiictSenTeam13App").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),function(){angular.module("daiictSenTeam13App").controller("ProfileCtrl",["$scope","$location","$timeout","$rootScope",function(a,b,c,d){function e(){f.child("profile").orderByChild("email").equalTo(g.password.email).on("value",function(b){console.log(b.val());var d=b.val();for(var e in d){a.firstName=d[e].firstName,a.lastName=d[e].lastName,a.type=d[e].type,a.institute=d[e].institute,a.about=d[e].about,a.interests=d[e].interests,a.publications=d[e].publications,a.location=d[e].location,a.contact=d[e].contact,h=e;break}c(function(){a.$apply()}),a.loading=!1},function(a){console.error(a)})}var f=new Firebase("https://sfip.firebaseio.com/"),g=f.getAuth(),h="",i=this;a.loading=!0,g?console.log("Authenticated user with uid:",g.uid):b.path("/"),e(),a.initMaterial=function(){$(document).ready(function(){$(".button-collapse").sideNav(),$("select").material_select()})},a.initMaterial(),i.logout=function(){console.log("logout called"),f.unauth(),console.log("logged out"),b.path("/")},i.updateProfile=function(b){switch(console.log("called",b),b){case"institute":f.child("profile").child(h).update({institute:a.institute},function(a){a?Materialize.toast("Could not update"+b,4e3):Materialize.toast("Updated "+b,4e3)});break;case"about":f.child("profile").child(h).update({about:a.about},function(a){a?Materialize.toast("Could not update"+b,4e3):Materialize.toast("Updated "+b,4e3)});break;case"interest":f.child("profile").child(h).child("interests").push({interest:a.interest},function(d){d?Materialize.toast("Could not add"+b,4e3):(a.interest="",c(function(){a.$apply()}),Materialize.toast("Added "+b,4e3))});break;case"publication":f.child("profile").child(h).child("publications").push({publication:a.publication},function(d){d?Materialize.toast("Could not add"+b,4e3):(a.publication="",c(function(){a.$apply()}),Materialize.toast("Added "+b,4e3))});break;case"location":f.child("profile").child(h).update({location:a.location},function(a){a?Materialize.toast("Could not update"+b,4e3):Materialize.toast("Updated "+b,4e3)});break;case"contact":f.child("profile").child(h).update({contact:a.contact},function(a){a?Materialize.toast("Could not update"+b,4e3):Materialize.toast("Updated "+b,4e3)})}},i.removeItem=function(a,b){f.child("profile").child(h).child(b).child(a).remove()},i.viewHomePage=function(){d.userType===!0?b.path("/faculty"):b.path("/student")},a.goTo=function(a){switch(a){case"home":d.userType===!0?b.path("/faculty"):b.path("/student");break;case"profile":b.path("/profile");break;case"chatRooms":d.userType===!0?b.path("/createChat"):b.path("/chatRooms");break;case"jobs":d.userType===!0?b.path("/posting"):b.path("/jobs");break;case"people":b.path("/people");break;default:b.path("/")}}}])}(),function(){angular.module("daiictSenTeam13App").controller("RegisterCtrl",["$scope","$location","$timeout",function(a,b,c){function d(){a.email="",a.firstName="",a.lastName="",a.userType="student",a.institute=""}function e(a){g.resetPassword({email:a},function(a){if(a)switch(a.code){case"INVALID_USER":Materialize.toast("The specified user account does not exist.",4e3);break;default:Materialize.toast("Error resetting password:"+a,4e3)}})}function f(){return a.email.indexOf("@daiict.ac.in")<0?(Materialize.toast("Please use DAIICT email address.",4e3),d(),!1):/([^\s])/.test(a.firstName)&&/([^\s])/.test(a.lastName)&&/([^\s])/.test(a.institute)?(a.email=a.email.trim(),a.firstName=a.firstName.trim(),a.lastName=a.lastName.trim(),a.institute=a.institute.trim(),c(function(){a.$apply()}),!0):(Materialize.toast("All fields are required.",4e3),!1)}var g=new Firebase("https://sfip.firebaseio.com/"),h=this,i="pass";d(),h.signup=function(){f()&&(a.loading=!0,g.createUser({email:a.email,password:i},function(d){if(d)switch(d.code){case"EMAIL_TAKEN":Materialize.toast("The new user account cannot be created because the email is already in use.",4e3);break;case"INVALID_EMAIL":Materialize.toast("The specified email is not a valid email.",4e3);break;default:Materialize.toast("Error creating user. Try again later",4e3),b.path("/"),c(function(){a.$apply()})}else{var f={},h=g.child("users").push().key();f["/users/"+h]={email:a.email,firstName:a.firstName,lastName:a.lastName,type:a.userType,activated:!1};var i=g.child("profile").push().key();f["/profile/"+i]={email:a.email,firstName:a.firstName,lastName:a.lastName,type:a.userType},g.update(f,function(d){d?Materialize.toast("Cannot create profile",4e3):(a.loading=!1,b.path("/"),Materialize.toast("Password sent to the email.",4e3),c(function(){a.$apply()}))}),e(a.email)}}))}}])}(),function(){angular.module("daiictSenTeam13App").controller("StudentCtrl",["$scope","$location","$timeout","$rootScope",function(a,b,c,d){function e(){g.child("postings").limitToFirst(4).once("value",function(b){a.jobs=b.val()},function(a){console.error(a)}),g.child("chatRooms").limitToFirst(4).once("value",function(b){a.chatRooms=b.val()},function(a){console.error(a)}),g.child("applications").orderByChild("appliedBy").equalTo(h.password.email).on("value",function(b){a.applications=b.val(),c(function(){a.$apply()}),a.loading=!1},function(a){console.error(a)})}function f(a,b){for(var c in a)if(c.emailId===h.password.email)return!1;if(b.slots>0){var d=new Date,e=String(d.getHours())+":"+String(d.getMinutes());if(e>b.startTime){var f=new Date,g=new Array(7);return g[0]="Sunday",g[1]="Monday",g[2]="Tuesday",g[3]="Wednesday",g[4]="Thursday",g[5]="Friday",g[6]="Saturday",g[f.getDay()]===b.days?!0:(Materialize.toast("Wrong Day. Chat room not open.",4e3),!1)}return Materialize.toast("Chat room not open yet. Try again later",4e3),!1}return Materialize.toast("Chat room full. Please try again later",4e3),!1}var g=new Firebase("https://sfip.firebaseio.com/"),h=g.getAuth(),i=this;a.jobs={},a.chatRooms={},a.loading=!0,h?console.log("Authenticated user with uid:",h):b.path("/"),d.userType===!0&&b.path("/faculty"),e(),a.initMaterial=function(){$(document).ready(function(){$(".button-collapse").sideNav(),$(".collapsible").collapsible({accordion:!1})})},a.initMaterial(),a.goTo=function(a){switch(a){case"home":b.path("/student");break;case"profile":b.path("/profile");break;case"chatRooms":d.userType===!0?b.path("/createChat"):b.path("/chatRooms");break;case"jobs":d.userType===!0?b.path("/posting"):b.path("/jobs");break;case"people":b.path("/people");break;default:b.path("/")}},i.logout=function(){g.unauth(),b.path("/")},i.applyForJob=function(a,c){g.child("applications").orderByChild("appliedBy").equalTo(h.password.email).once("value",function(d){null!==d.val()?Materialize.toast("You have already applied.",4e3):b.path("/application").search({jobId:a,jobName:c})})},i.openChatRoom=function(d,e){a.loading(!0),g.child("chatRooms").child(d).once("value",function(i){f(i.val().members,e)&&g.child("chatRooms").child(d).child("members").push({emailId:h.password.email,kicked:0,active:1},function(e){e?(console.log(e),a.loading=!1):g.child("chatRooms").child(d).child("slots").transaction(function(a){return 0!==a?a-1:void 0},function(e,f){e||f&&(b.path("/chat").search({roomId:d}),c(function(){a.$apply()}))})})})}}])}(),function(){angular.module("daiictSenTeam13App").controller("JobsCtrl",["$scope","$location","$rootScope","$timeout",function(a,b,c,d){var e=new Firebase("https://sfip.firebaseio.com/"),f=e.getAuth(),g=this;a.loading=!0,a.jobPostings={},a.initCollapsible=function(){$(document).ready(function(){$(".collapsible").collapsible({accordion:!1})})},a.initCollapsible(),f?console.log("Authenticated user with uid:",f.uid):b.path("/"),e.child("postings").once("value",function(b){a.jobPostings=b.val(),console.log(a.jobPostings),a.loading=!1,d(function(){a.$apply()})},function(a){console.error(a)}),a.goTo=function(a){switch(a){case"home":c.userType===!0?b.path("/faculty"):b.path("/student");break;case"profile":b.path("/profile");break;case"chatRooms":c.userType===!0?b.path("/createChat"):b.path("/chatRooms");break;case"jobs":c.userType===!0?b.path("/posting"):b.path("/jobs");break;case"people":b.path("/people");break;default:b.path("/")}},g.logout=function(){console.log("logout called"),e.unauth(),console.log("logged out"),b.path("/")},g.applyForJob=function(a,c){b.path("/application").search({jobId:a,jobName:c})}}])}(),function(){angular.module("daiictSenTeam13App").controller("PostingCtrl",["$scope","$location","$timeout","$rootScope",function(a,b,c,d){function e(){console.log("getData called"),h.orderByChild("postedBy").equalTo(i.password.email).on("value",function(b){a.createdJobs=b.val(),console.log(a.createdJobs),c(function(){a.$apply()}),a.loading=!1},function(a){console.error(a)}),console.log("getData return")}function f(){return/([^\s])/.test(a.jobName)&&/([^\s])/.test(a.description)&&/([^\s])/.test(a.positions)&&/([^\s])/.test(a.contactEmail)&&/([^\s])/.test(a.startDate)&&/([^\s])/.test(a.endDate)&&/([^\s])/.test(a.deadline)&&/([^\s])/.test(a.location)?new Date(a.startDate)<new Date?(Materialize.toast("Start Date should be greater than today.",4e3),!1):new Date(a.startDate)>new Date(a.endDate)?(Materialize.toast("Start Date should be lower than End Date",4e3),!1):new Date(a.deadline)>new Date(a.startDate)?(Materialize.toast("Deadline should be lower than Start Date.",4e3),!1):!0:(Materialize.toast("All fields are required",4e3),!1)}var g=new Firebase("https://sfip.firebaseio.com/"),h=new Firebase("https://sfip.firebaseio.com/postings"),i=g.getAuth(),j=this;a.loading=!0,a.jobName="",a.description="",a.positions="",a.startDate="",a.endDate="",a.deadline="",a.contactEmail="",a.location="",i?console.log("Authenticated user with uid:",i.uid):b.path("/"),d.userType===!1&&b.path("/student"),a.initMaterial=function(){$(document).ready(function(){$(".button-collapse").sideNav()})},a.initMaterial(),e(),a.resetValues=function(){document.getElementById("postingForm").reset(),$("#description").trigger("autoresize")},a.resetValues(),j.createJob=function(){f()&&h.push({jobName:a.jobName,description:a.description,contactEmail:a.contactEmail,location:a.location,startDate:new Date(a.startDate),endDate:new Date(a.endDate),postedBy:i.password.email,positions:a.positions,deadline:new Date(a.deadline),postedOn:new Date(Firebase.ServerValue.TIMESTAMP)},function(b){b?Materialize.toast("Could not create Job. Please try again later.",4e3):(Materialize.toast("Job Created",4e3),a.resetValues())})},j.showAll=function(){b.path("/jobs")},j.viewJob=function(a){console.log(a),b.path("/viewJob").search({jobId:a})},j.deleteJob=function(a){console.log("delete job"),g.child("postings").child(a).remove(function(a){a&&Materialize.toast("Could not Delete Job. Try later",4e3)}),g.child("application").child(a).remove(function(a){a?Materialize.toast("Could not Delete Job. Try later",4e3):Materialize.toast("Deleted Job",4e3)})},a.goTo=function(a){switch(a){case"home":b.path("/faculty");break;case"profile":b.path("/profile");break;case"chatRooms":b.path("/createChat");break;case"jobs":b.path("/posting");break;case"people":b.path("/people");break;default:b.path("/")}},a.logout=function(){g.unauth(),b.path("/")}}])}(),function(){angular.module("daiictSenTeam13App").controller("ApplicationCtrl",["$scope","$location","$routeParams","$window","$rootScope","$timeout",function(a,b,c,d,e,f){function g(){i.child("postings").orderByKey().equalTo(k).once("value",function(b){m=b.val(),console.log(m);for(var c in m){a.jobName=m[c].jobName;break}a.loading=!1,f(function(){a.$apply()}),a.loading=!1},function(a){console.error(a)})}function h(){return/([^\s])/.test(a.letter)&&/([^\s])/.test(a.contactEmail)?!0:(Materialize.toast("All fields are required",4e3),!1)}var i=new Firebase("https://sfip.firebaseio.com/"),j=i.getAuth(),k=c.jobId,l=c.jobName,m={};a.loading=!0,a.jobName="",a.letter="",a.contactEmail="",a.attachment="",j&&k&&l?console.log("Authenticated user with uid:",j.uid):b.path("/"),e.userType===!0&&b.path("/faculty"),a.initMaterial=function(){$(".modal-trigger").leanModal()},a.initMaterial(),a.resetValues=function(){document.getElementById("applicationForm").reset(),$("#letter").trigger("autoresize")},a.resetValues(),a.logout=function(){i.unauth(),b.path("/")},g(),a.submitApplication=function(){h()&&i.child("applications").push({appliedBy:j.password.email,contactEmail:a.contactEmail,letter:a.letter,attachment:a.attachment,submittedOn:Firebase.ServerValue.TIMESTAMP,jobId:k,jobName:l},function(b){b?(Materialize.toast("Server error. Try again later",4e3),d.history.back(),f(function(){a.$apply()})):(Materialize.toast("Application Submitted",4e3),d.history.back(),f(function(){a.$apply()}))})},a.goTo=function(a){switch(a){case"home":e.userType===!0?b.path("/faculty"):b.path("/student");break;case"profile":b.path("/profile");break;case"chatRooms":e.userType===!0?b.path("/createChat"):b.path("/chatRooms");break;case"jobs":e.userType===!0?b.path("/posting"):b.path("/jobs");break;case"people":b.path("/people");break;default:b.path("/")}}}])}(),function(){angular.module("daiictSenTeam13App").controller("FacultyCtrl",["$scope","$location","$rootScope","$timeout",function(a,b,c,d){function e(){a.loading=!0,j.orderByChild("postedBy").equalTo(h.password.email).on("value",function(b){a.createdJobs=b.val(),console.log(a.createdJobs)},function(a){console.error(a)}),g.child("chatRooms").orderByChild("createdBy").equalTo(h.password.email).once("value",function(b){a.chatRooms=b.val(),console.log(a.chatRooms),d(function(){a.$apply()}),a.loading=!1})}function f(a){for(var b in a)if(b.emailId===h.password.email)return!1;return!0}var g=new Firebase("https://sfip.firebaseio.com/"),h=g.getAuth(),i=this,j=new Firebase("https://sfip.firebaseio.com/postings");a.loading=!0,a.chatRooms={},h?console.log("Authenticated user with uid:",h.uid):b.path("/"),c.userType===!1&&b.path("/student"),e(),a.initMaterial=function(){$(document).ready(function(){$(".collapsible").collapsible({accordion:!1}),$(".button-collapse").sideNav()})},a.initMaterial(),a.goTo=function(a){switch(a){case"home":b.path("/faculty");break;case"profile":b.path("/profile");break;case"chatRooms":b.path("/createChat");break;case"jobs":b.path("/posting");break;case"people":b.path("/people");break;default:b.path("/")}},a.logout=function(){g.unauth(),b.path("/")},i.showAllChatRooms=function(){b.path("/chatRooms")},i.openChatRoom=function(c){g.child("chatRooms").child(c).once("value",function(e){f(e.val().members)&&g.child("chatRooms").child(c).child("members").push({emailId:h.password.email,kicked:0,active:1},function(e){e?console.log(e):(b.path("/chat").search({roomId:c}),d(function(){a.$apply()}))})})},i.deleteChatRoom=function(b){g.child("chatRooms").child(b).remove(function(b){b?Materialize.toast("Could not Delete Chat Room. Try later",4e3):(Materialize.toast("Deleted Chat Room",4e3),d(function(){a.$apply()}))})},i.showAllJobs=function(){b.path("/jobs")},i.viewJob=function(a){console.log(a),b.path("/viewJob").search({jobId:a})},i.deleteJob=function(a){console.log("delete job"),g.child("postings").child(a).remove(function(a){a&&Materialize.toast("Could not Delete Job. Try later",4e3)}),g.child("application").child(a).remove(function(a){a?Materialize.toast("Could not Delete Job. Try later",4e3):Materialize.toast("Deleted Job",4e3)})}}])}(),function(){angular.module("daiictSenTeam13App").controller("ViewjobCtrl",["$scope","$location","$routeParams","$rootScope",function(a,b,c,d){function e(){console.log("getData called"),g.orderByChild("jobId").equalTo(i).on("value",function(b){a.applications=b.val(),console.log(b.val()),a.$apply()},function(a){console.error(a)}),console.log("getData return"),a.loading=!1}var f=new Firebase("https://sfip.firebaseio.com/"),g=new Firebase("https://sfip.firebaseio.com/applications"),h=f.getAuth(),i=c.jobId,j=this;a.loading=!0,h&&i?console.log("Authenticated user with uid:",h.uid):b.path("/"),d.userType===!1&&b.path("/student"),e(),a.initMaterial=function(){$(document).ready(function(){$(".collapsible").collapsible({accordion:!1})}),$(".button-collapse").sideNav()},a.initMaterial(),a.logout=function(){console.log("logout called"),f.unauth(),console.log("logged out"),b.path("/")},j.acceptApplication=function(a){console.log("accept"),f.child("applications").child(a).update({status:"accept"},function(a){a?Materialize.toast("Try again",4e3):Materialize.toast("Accept Notification sent",4e3)})},j.rejectApplication=function(a){console.log("reject"),f.child("applications").child(a).update({status:"reject"},function(a){a?Materialize.toast("Try again",4e3):Materialize.toast("Reject Notification sent",4e3)})},a.goTo=function(a){switch(a){case"home":b.path("/faculty");break;case"profile":b.path("/profile");break;case"chatRooms":d.userType===!0?b.path("/createChat"):b.path("/chatRooms");break;case"jobs":d.userType===!0?b.path("/posting"):b.path("/jobs");break;case"people":b.path("/people");break;default:b.path("/")}}}])}(),function(){angular.module("daiictSenTeam13App").controller("ChatroomsCtrl",["$scope","$location","$timeout","$rootScope",function(a,b,c,d){function e(){g.child("chatRooms").once("value",function(b){a.chatRooms=b.val(),console.log(a.chatRooms),c(function(){a.$apply()}),a.loading=!1},function(){Materialize.toast("Cannot get Chat Rooms. Try again later",4e3)})}function f(b,c){for(var d in b)if(d.emailId===h.password.email)return!1;if(a.userType===!0)return!0;if(c.slots>0){var e=new Date,f=String(e.getHours())+":"+String(e.getMinutes());if(f>c.startTime){var g=new Date,i=new Array(7);return i[0]="Sunday",i[1]="Monday",i[2]="Tuesday",i[3]="Wednesday",i[4]="Thursday",i[5]="Friday",i[6]="Saturday",i[g.getDay()]===c.days?!0:(Materialize.toast("Wrong Day. Chat room not open.",4e3),!1)}return Materialize.toast("Chat room not open yet. Try again later",4e3),!1}return Materialize.toast("Chat room full. Please try again later",4e3),!1}var g=new Firebase("https://sfip.firebaseio.com/"),h=g.getAuth();a.chatHistory=[],a.members=[],a.loading=!0,a.jobs={},h?console.log("Authenticated user with uid:",h.uid):b.path("/"),a.initMaterial=function(){$(document).ready(function(){$(".modal-trigger").leanModal(),$(".collapsible").collapsible({accordion:!1}),$(".button-collapse").sideNav()})},a.initMaterial(),a.goTo=function(a){switch(a){case"home":d.userType===!0?b.path("/faculty"):b.path("/student");break;case"profile":b.path("/profile");break;case"chatRooms":d.userType===!0?b.path("/createChat"):b.path("/chatRooms");break;case"jobs":d.userType===!0?b.path("/posting"):b.path("/jobs");break;case"people":b.path("/people");break;default:b.path("/")}},a.logout=function(){g.unauth(),b.path("/")},e(),a.openChatRoom=function(e,i){a.loading=!0,g.child("chatRooms").child(e).once("value",function(j){f(j.val().members,i)&&g.child("chatRooms").child(e).child("members").push({emailId:h.password.email,kicked:0,active:1},function(f){f?(a.loading=!1,console.log(f)):d.userType!==!0?g.child("chatRooms").child(e).child("slots").transaction(function(a){return 0!==a?a-1:void 0},function(d,f){d?a.loading=!1:f?(b.path("/chat").search({roomId:e}),c(function(){a.$apply()})):a.loading=!1}):(b.path("/chat").search({roomId:e}),c(function(){a.$apply()}))})})}}])}(),function(){angular.module("daiictSenTeam13App").controller("CreatechatCtrl",["$scope","$location","$rootScope","$timeout",function(a,b,c,d){function e(){g.child("chatRooms").orderByChild("createdBy").equalTo(h.password.email).on("value",function(b){a.loading=!0,a.chatRooms=b.val(),console.log(a.chatRooms),d(function(){a.$apply()}),a.loading=!1})}function f(a){for(var b in a)if(b.emailId===h.password.email)return!1;return!0}var g=new Firebase("https://sfip.firebaseio.com/"),h=g.getAuth(),i=this;a.loading=!0,a.day="Monday",h&&c.userType?console.log("Authenticated user with uid:",h.uid):b.path("/"),c.userType===!1&&b.path("/student"),a.initMaterial=function(){$(document).ready(function(){$(".collapsible").collapsible({accordion:!1}),$(".button-collapse").sideNav()})},a.initMaterial(),a.logout=function(){console.log("logout called"),g.unauth(),console.log("logged out"),b.path("/")},e(),i.resetValues=function(){document.getElementById("createChatForm").reset(),document.getElementById("Monday").checked=!0,$("#chatDescription").trigger("autoresize")},i.createChatRoom=function(){console.log("createChatRoom called"),g.child("chatRooms").push({chatRoomName:a.chatName,createdBy:h.password.email,startTime:a.startTime,description:a.chatDescription,slots:a.slots,days:a.day,active:!1},function(a){a?Materialize.toast("Could not create Chat Room. Please try again",4e3):(Materialize.toast("Created Chat Room",4e3),i.resetValues())})},i.openChatRoom=function(c){g.child("chatRooms").child(c).once("value",function(e){f(e.val().members)&&g.child("chatRooms").child(c).child("members").push({emailId:h.password.email,kicked:0,active:1},function(e){e?console.log(e):(b.path("/chat").search({roomId:c}),d(function(){a.$apply()}))})})},i.deleteChatRoom=function(a){g.child("chatRooms").child(a).remove(function(a){a?Materialize.toast("Could not Delete Chat Room. Try later",4e3):Materialize.toast("Deleted Chat Room",4e3)})},i.viewMemberProfile=function(a){console.log("some random text"),b.path("/viewProfile").search({profileId:a})},a.goTo=function(a){switch(a){case"home":b.path("/faculty");break;case"profile":b.path("/profile");break;case"chatRooms":b.path("/createChat");break;case"jobs":b.path("/posting");break;case"people":b.path("/people");break;default:b.path("/")}}}])}(),function(){angular.module("daiictSenTeam13App").controller("ResetpasswordCtrl",["$scope","$location","$timeout",function(a,b,c){function d(){return/([^\s])/.test(a.email)&&/([^\s])/.test(a.oldPassword)&&/([^\s])/.test(a.newPassword)&&/([^\s])/.test(a.confirmNew)?a.newPassword===a.confirmNew?(Materialize.toast("Passwords did not match",4e3),!1):!0:(Materialize.toast("All fields are required",4e3),!1)}var e=new Firebase("https://sfip.firebaseio.com/");a.oldPassword="",a.newPassword="",a.confirmNew="",a.email="",a.changePass=function(){d()&&e.changePassword({email:a.email,oldPassword:a.oldPassword,newPassword:a.newPassword},function(d){if(d)switch(d.code){case"INVALID_PASSWORD":Materialize.toast("The specified user account password is incorrect.",4e3);break;case"INVALID_USER":Materialize.toast("The specified user account does not exist.",4e3);break;default:Materialize.toast("Error changing password:",4e3)}else Materialize.toast("User password changed successfully!",4e3),b.path("/"),c(function(){a.$apply()})})}}])}(),function(){angular.module("daiictSenTeam13App").controller("ChatCtrl",["$scope","$location","$routeParams","$timeout","$window","$rootScope",function(a,b,c,d,e,f){function g(){h.child("chatRooms").child(j).on("value",function(b){a.createdBy=b.val().createdBy,a.slots=b.val().slots,a.chatHistory=b.val().messages,a.members=b.val().members;for(var c in a.chatHistory)a.chatHistory[c].sender===i.password.email?(a.chatHistory[c].sender="You:",a.chatHistory[c].alignment="right-align"):(a.chatHistory[c].sender+=":",a.chatHistory[c].alignment="left-align");for(var e in a.members)1===a.members[e].active&&i.password.email===a.createdBy&&i.password.email!==a.members[e].emailId?a.members[e].showKick=!0:a.members[e].emailId===i.password.email?k=e:a.members[e].showKick=!1;a.loading=!1,d(function(){a.$apply()})})}var h=new Firebase("https://sfip.firebaseio.com/"),i=h.getAuth(),j=c.roomId,k="",l=new Firebase("https://sfip.firebaseio.com/chatRooms/"+j+"/");a.loading=!0,a.chatHistory=[],a.members=[],a.kicked=!1,a.leaveRoom=!1,a.createdBy="",a.kickMyself=!1,i?console.log("Authenticated user with uid:",i.uid):b.path("/"),a.initMaterial=function(){$(document).ready(function(){$(".collapsible").collapsible({accordion:!1}),$(".button-collapse").sideNav()})},a.initMaterial(),a.logout=function(){h.unauth(),b.path("/")},g(),h.child("chatRooms").child(j).child("members").on("child_removed",function(c){c.val().emailId===i.password.email&&(Materialize.toast("You were kicked",4e3),b.path("/chatRooms"),d(function(){a.$apply()}))}),a.sentMessage=function(){""!==a.messageInput&&(l.child("messages").push({sender:i.password.email,text:a.messageInput}),a.messageInput="",d(function(){a.$apply()}))},a.myFunct=function(b){if(13===b.which&&""!==a.messageInput){var c=new Firebase("https://sfip.firebaseio.com/chatRooms/"+j+"/");c.child("messages").push({sender:i.password.email,text:a.messageInput}),a.messageInput="",d(function(){a.$apply()})}},a.leaveThisRoom=function(){h.child("chatRooms").child(j).child("members").child(k).remove(function(b){b?Materialize.toast("Cannot Leave Room. Server Error.",4e3):f.userType!==!0?h.child("chatRooms").child(j).child("slots").transaction(function(a){return a+1},function(b,c){b||c&&(Materialize.toast("Left Chat Room.",4e3),d(function(){a.$apply()}))}):d(function(){a.$apply()})})},e.onbeforeunload=function(){a.leaveThisRoom()},a.kickMember=function(b){h.child("chatRooms").child(j).child("members").child(b).remove(function(b){b?Materialize.toast("Cannot Delete Member",4e3):h.child("chatRooms").child(j).child("slots").transaction(function(a){return a+1},function(b,c){b||c&&(Materialize.toast("Kicked Member",2e3),a.$apply())})})},a.viewMemberProfile=function(a){b.path("/viewProfile").search({profileId:a})},a.goTo=function(a){switch(a){case"home":f.userType===!0?b.path("/faculty"):b.path("/student");break;case"profile":b.path("/profile");break;case"chatRooms":f.userType===!0?b.path("/createChat"):b.path("/chatRooms");break;case"jobs":f.userType===!0?b.path("/posting"):b.path("/jobs");break;case"people":b.path("/people");break;default:b.path("/")}}}])}(),function(){angular.module("daiictSenTeam13App").controller("PeopleCtrl",["$scope","$location","$timeout","$rootScope",function(a,b,c,d){function e(){f.child("profile").once("value",function(b){a.allUsers=b.val(),console.log(a.allUsers),a.loading=!1,c(function(){a.$apply()})},function(a){a&&(Materialize.toast("Could Not obtain Data",4e3),b.path("/"))})}var f=new Firebase("https://sfip.firebaseio.com/"),g=(f.getAuth(),this);a.jobs={},a.allUsers={},a.loading=!0,a.goTo=function(a){switch(a){case"home":d.userType===!0?b.path("/faculty"):b.path("/student");break;case"profile":b.path("/profile");break;case"chatRooms":d.userType===!0?b.path("/createChat"):b.path("/chatRooms");break;case"jobs":d.userType===!0?b.path("/posting"):b.path("/jobs");break;case"people":b.path("/people");break;default:b.path("/")}},e(),g.viewProfile=function(a){b.path("/viewProfile").search({profileId:a})},g.logout=function(){f.unauth(),b.path("/")}}])}(),function(){angular.module("daiictSenTeam13App").controller("ViewprofileCtrl",["$scope","$location","$timeout","$routeParams","$rootScope",function(a,b,c,d,e){function f(){g.child("profile").orderByChild("email").equalTo(i).once("value",function(b){console.log(b.val());var d=b.val();for(var e in d){a.firstName=d[e].firstName,a.lastName=d[e].lastName,a.type=d[e].type,a.institute=d[e].institute,a.about=d[e].about,a.interests=d[e].interests,a.publications=d[e].publications;break}c(function(){a.$apply()}),a.loading=!1},function(a){console.error(a)})}var g=new Firebase("https://sfip.firebaseio.com/"),h=g.getAuth(),i=d.profileId,j=this;a.loading=!0,h?console.log("Authenticated user with uid:",h.uid):b.path("/"),f(),a.initMaterial=function(){$(document).ready(function(){$(".button-collapse").sideNav()})},a.initMaterial(),j.logout=function(){console.log("logout called"),g.unauth(),console.log("logged out"),b.path("/")},a.goTo=function(a){switch(a){case"home":e.userType===!0?b.path("/faculty"):b.path("/student");break;case"profile":b.path("/profile");break;case"chatRooms":e.userType===!0?b.path("/createChat"):b.path("/chatRooms");break;case"jobs":e.userType===!0?b.path("/posting"):b.path("/jobs");break;case"people":b.path("/people");break;default:b.path("/")}}}])}(),angular.module("daiictSenTeam13App").filter("searchJobs",function(){return function(a,b){if(!a)return a;if(!b)return a;var c=(""+b).toLowerCase(),d={};return angular.forEach(a,function(a,b){var e=(""+a.jobName).toLowerCase(),f=(""+a.description).toLowerCase(),g=(""+a.location).toLowerCase(),h=(""+a.postedBy).toLowerCase();(-1!==e.indexOf(c)||-1!==f.indexOf(c)||-1!==g.indexOf(c)||-1!==h.indexOf(c))&&(d[b]=a)}),d}}),angular.module("daiictSenTeam13App").filter("searchPeople",function(){return function(a,b){if(!a)return a;if(!b)return a;var c=(""+b).toLowerCase(),d={};return angular.forEach(a,function(a,b){var e=(""+a.firstName).toLowerCase(),f=(""+a.institute).toLowerCase(),g=(""+a.lastName).toLowerCase(),h=(""+a.email).toLowerCase();(-1!==e.indexOf(c)||-1!==f.indexOf(c)||-1!==g.indexOf(c)||-1!==h.indexOf(c))&&(d[b]=a)}),d}}),angular.module("daiictSenTeam13App").filter("searchChat",function(){return function(a,b){if(!a)return a;if(!b)return a;var c=(""+b).toLowerCase(),d={};return angular.forEach(a,function(a,b){var e=(""+a.sender).toLowerCase(),f=(""+a.text).toLowerCase();(-1!==e.indexOf(c)||-1!==f.indexOf(c))&&(d[b]=a)}),d}}),angular.module("daiictSenTeam13App").filter("searchChatRoom",function(){return function(a,b){if(!a)return a;if(!b)return a;
var c=(""+b).toLowerCase(),d={};return angular.forEach(a,function(a,b){var e=(""+a.chatRoomName).toLowerCase(),f=(""+a.description).toLowerCase(),g=(""+a.days).toLowerCase(),h=(""+a.startTime).toLowerCase();(-1!==e.indexOf(c)||-1!==f.indexOf(c)||-1!==g.indexOf(c)||-1!==h.indexOf(c))&&(d[b]=a)}),d}}),angular.module("daiictSenTeam13App").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/application.html",'<nav> <div class="nav-wrapper container"> <a ng-click="goTo(\'home\')" class="brand-logo pointer">SFIP</a> <ul id="nav-mobile" class="right hide-on-med-and-down"> <li><a ng-click="logout()">Logout</a></li> </ul> <ul id="slide-out" class="side-nav fixed"> <div class="sidenav-profile center-align"> <img class="circle responsive-img" src="http://lorempixel.com/200/200"> <!-- <h6 class="black-text">Ankit Muchhala</h6> --> </div> <li><a ng-click="goTo(\'profile\')">Profile</a></li> <li><a ng-click="goTo(\'people\')">People</a></li> <li><a ng-click="goTo(\'chatRooms\')">Chat Rooms</a></li> <li><a ng-click="goTo(\'jobs\')">Jobs</a></li> </ul> <a href="#" data-activates="slide-out" class="button-collapse"><i class="mdi-navigation-menu"></i></a> </div> </nav> <br> <div class="preloader-wrapper active container center-div" ng-show="loading"> <div class="spinner-layer spinner-red-only"> <div class="circle-clipper left"> <div class="circle"></div> </div> <div class="gap-patch"> <div class="circle"></div> </div> <div class="circle-clipper right"> <div class="circle"></div> </div> </div> </div> <div class="row container" ng-hide="loading"> <h5 class="light">Apply for a Job</h5> <form class="col s12" id="applicationForm"> <div class="row"> <div class="input-field col s6"> <input ng-model="jobName" disabled id="jobName" type="text"> <label class="active" for="jobName">Job Name</label> </div> </div> <div class="row"> <div class="input-field col s12"> <textarea id="letter" ng-model="letter" class="materialize-textarea"></textarea> <label for="letter">Covering Letter / SOP</label> </div> </div> <div class="row"> <div class="input-field col s6"> <input id="email" type="email" ng-model="contactEmail"> <label for="email">Contact Email</label> </div> </div> <div class="file-field input-field"> <div class="btn"> <span>File</span> <input ng-model="attachment" type="file"> </div> <div class="file-path-wrapper"> <input class="file-path validate" type="text"> </div> </div> </form> <br> <div class="right-align"> <div class="btn" ng-click="resetValues()">Reset</div> <a class="waves-effect waves-light btn modal-trigger" href="#confirmApplication">Apply</a> </div> <!-- Modal Structure --> <div id="confirmApplication" class="modal"> <div class="modal-content"> <h4>Confirm Application</h4> <p>Are you sure you want to submit this application. This is an irreversible action.</p> </div> <div class="modal-footer"> <a ng-click="submitApplication()" class="modal-action modal-close waves-effect waves-green btn-flat">Submit</a> <a href="" class="modal-action modal-close waves-effect waves-green btn-flat">Cancel</a> </div> </div> </div>'),a.put("views/chat.html",'<nav> <div class="nav-wrapper container"> <a href="#" class="brand-logo">SFIP</a> <ul id="nav-mobile" class="right hide-on-med-and-down"> <li><a ng-click="logout()">Logout</a></li> </ul> <ul id="slide-out" class="side-nav fixed"> <div class="sidenav-profile center-align"> <img class="circle responsive-img" src="http://lorempixel.com/200/200"> <!-- <h6 class="black-text">Ankit Muchhala</h6> --> </div> <li><a ng-click="goTo(\'profile\')">Profile</a></li> <li><a ng-click="goTo(\'people\')">People</a></li> <li><a ng-click="goTo(\'chatRooms\')">Chat Rooms</a></li> <li><a ng-click="goTo(\'jobs\')">Jobs</a></li> </ul> <a href="#" data-activates="slide-out" class="button-collapse"><i class="mdi-navigation-menu"></i></a> </div> </nav> <div class="preloader-wrapper active container center-div" ng-show="loading"> <div class="spinner-layer spinner-red-only"> <div class="circle-clipper left"> <div class="circle"></div> </div> <div class="gap-patch"> <div class="circle"></div> </div> <div class="circle-clipper right"> <div class="circle"></div> </div> </div> </div> <div class="container" ng-hide="loading" ng-keypress="myFunct($event)"> <br> <div style="position: absolute; right:40px" class="hide-on-med-and-down"> <p class="center-align"> <b>Active members</b></p> <ul class="collection grey lighten-4"> <a ng-repeat="(key, member) in members" class="collection-item pointer" ng-click="viewMemberProfile(member.emailId)"> {{member.emailId}} <div ng-if="member.showKick" ng-click="kickMember(key); $event.stopPropagation();" class="secondary-content pointer red-text">&nbsp;&nbsp;&nbsp;Kick</div> </a> </ul> </div> <div class="row" style="margin: 8px 0 0 0"> <h5 class="light col s6" style="margin-bottom: 0">Chat</h5> <div class="input-field col s6" style="margin: 0"> <input ng-model="search" id="search" type="text"> <label for="search">Search </label> </div> </div> <div class="chat-box"> <div ng-repeat="message in chatHistory | searchChat:search"> <div ng-class="message.alignment"> <small class="chat-bubble grey lighten-3"><span class="grey-text">{{message.sender}}</span>&nbsp;{{message.text}}</small> </div> </div> </div> <div class="row margin"> <div class="input-field col s12"> <input ng-model="messageInput" id="messageInput" type="text" style="margin-bottom: 4px"> <label class="center-align">message</label> </div> </div> <div class="btn" ng-click="sentMessage()">Send</div> <div class="btn" ng-click="leaveThisRoom()">Leave room</div> </div>'),a.put("views/chatrooms.html",'<nav> <div class="nav-wrapper container"> <a href="#" class="brand-logo">SFIP</a> <ul id="nav-mobile" class="right hide-on-med-and-down"> <li><a ng-click="logout()">Logout</a></li> </ul> <ul id="slide-out" class="side-nav fixed"> <div class="sidenav-profile center-align"> <img class="circle responsive-img" src="http://lorempixel.com/200/200"> <!-- <h6 class="black-text">Ankit Muchhala</h6> --> </div> <li><a ng-click="goTo(\'profile\')">Profile</a></li> <li><a ng-click="goTo(\'people\')">People</a></li> <li><a ng-click="goTo(\'chatRooms\')">Chat Rooms</a></li> <li><a ng-click="goTo(\'jobs\')">Jobs</a></li> </ul> <a href="#" data-activates="slide-out" class="button-collapse"><i class="mdi-navigation-menu"></i></a> </div> </nav> <div class="preloader-wrapper active container center-div" ng-show="loading"> <div class="spinner-layer spinner-red-only"> <div class="circle-clipper left"> <div class="circle"></div> </div> <div class="gap-patch"> <div class="circle"></div> </div> <div class="circle-clipper right"> <div class="circle"></div> </div> </div> </div> <div class="container" ng-hide="loading"> <br> <div class="row" style="margin: 8px 0 0 0"> <h5 class="light col s6" style="margin-bottom: 0">All Chat Rooms</h5> <div class="input-field col s6" style="margin: 0"> <input ng-model="search" id="search" type="text"> <label for="search">Search </label> </div> </div> <ul class="collapsible" data-collapsible="accordion"> <li ng-repeat="(key, chat) in chatRooms | searchChatRoom:search"> <div class="collapsible-header">{{chat.chatRoomName}}</div> <div class="collapsible-body"> <p>{{chat.description}}</p> <div class="right-align" style="padding:0 16px 16px 16px"> <a class="btn" ng-click="openChatRoom(key, chat)">Join</a> </div> </div> </li> </ul> </div>'),a.put("views/createchat.html",'<nav> <div class="nav-wrapper container"> <a href="#" class="brand-logo">SFIP</a> <ul id="nav-mobile" class="right hide-on-med-and-down"> <li><a ng-click="createChat.logout()">Logout</a></li> </ul> <ul id="slide-out" class="side-nav fixed"> <div class="sidenav-profile center-align"> <img class="circle responsive-img" src="http://lorempixel.com/200/200"> <!-- <h6 class="black-text">Ankit Muchhala</h6> --> </div> <li><a ng-click="goTo(\'profile\')">Profile</a></li> <li><a ng-click="goTo(\'people\')">People</a></li> <li><a ng-click="goTo(\'chatRooms\')">Chat Rooms</a></li> <li><a ng-click="goTo(\'jobs\')">Jobs</a></li> </ul> <a href="#" data-activates="slide-out" class="button-collapse"><i class="mdi-navigation-menu"></i></a> </div> </nav> <br> <div class="preloader-wrapper active container center-div" ng-show="loading"> <div class="spinner-layer spinner-red-only"> <div class="circle-clipper left"> <div class="circle"></div> </div> <div class="gap-patch"> <div class="circle"></div> </div> <div class="circle-clipper right"> <div class="circle"></div> </div> </div> </div> <div class="row container" ng-hide="loading"> <h5 class="light">Active Chat Rooms</h5> <ul class="collapsible" data-collapsible="accordion"> <li ng-repeat="(chatRoomId, chat) in chatRooms"> <div class="collapsible-header"> {{chat.chatRoomName}} <div class="secondary-content red-text pointer" ng-click="createChat.deleteChatRoom(chatRoomId); $event.stopPropagation()">Delete</div> </div> <div class="collapsible-body"> <p>{{chat.description}}</p> <div class="right-align" style="padding:0 16px 16px 16px"> <a class="btn" ng-click="createChat.openChatRoom(key, chat)">Open Room</a> </div> </div> </li> </ul> <a class="btn right" ng-click="createChat.showAllChatRooms()">all Chat Rooms</a> <br> <h5 class="light">Chat Room Settings</h5> <form class="col s12" style="padding: 0" id="createChatForm"> <div class="row"> <div class="input-field col s6"> <input ng-model="chatName" id="chatName" type="text"> <label for="chatName">Name of Chat Room</label> </div> <div class="input-field col s6"> <input ng-model="slots" id="slots" type="number"> <label for="slots">Number of Slots</label> </div> </div> <div class="row"> <div class="input-field col s12"> <textarea id="chatDescription" ng-model="chatDescription" class="materialize-textarea"></textarea> <label for="chatDescription">Description</label> </div> </div> <div class="row"> <div class="input-field col s6"> <input id="start" ng-model="startTime" name="date" type="text" onfocus="(this.type=\'time\')" onfocusout="(this.type=\'text\')"> <label for="start">Start Time</label> </div> </div> <div class="row"> <div class="col s12"> <input name="days" ng-model="day" type="radio" id="Monday" class="with-gap" value="Monday"> <label for="Monday">Monday</label><br> <input name="days" ng-model="day" type="radio" id="Tuesday" class="with-gap" value="Tuesday"> <label for="Tuesday">Tuesday</label><br> <input name="days" ng-model="day" type="radio" id="Wednesday" class="with-gap" value="Wednesday"> <label for="Wednesday">Wednesday</label><br> <input name="days" ng-model="day" type="radio" id="Thursday" class="with-gap" value="Thursday"> <label for="Thursday">Thursday</label><br> <input name="days" ng-model="day" type="radio" id="Friday" class="with-gap" value="Friday"> <label for="Friday">Friday</label><br> <input name="days" ng-model="day" type="radio" id="Saturday" class="with-gap" value="Saturday"> <label for="Saturday">Saturday</label><br> <input name="days" ng-model="day" type="radio" id="Sunday" class="with-gap" value="Sunday"> <label for="Sunday">Sunday</label> </div> </div> </form> <div class="right-align"> <div class="btn" ng-click="createChat.resetValues()">Reset</div> <div class="btn" ng-click="createChat.createChatRoom()">Create</div> </div> </div>'),a.put("views/faculty.html",'<nav> <div class="nav-wrapper container"> <a href="#" class="brand-logo">SFIP</a> <ul id="nav-mobile" class="right hide-on-med-and-down"> <li><a ng-click="logout()">Logout</a></li> </ul> <ul id="slide-out" class="side-nav fixed"> <div class="sidenav-profile center-align"> <img class="circle responsive-img" src="http://lorempixel.com/200/200"> <!-- <h6 class="black-text">Ankit Muchhala</h6> --> </div> <li><a ng-click="goTo(\'profile\')">Profile</a></li> <li><a ng-click="goTo(\'people\')">People</a></li> <li><a ng-click="goTo(\'chatRooms\')">Chat Rooms</a></li> <li><a ng-click="goTo(\'jobs\')">Jobs</a></li> </ul> <a href="#" data-activates="slide-out" class="button-collapse"><i class="mdi-navigation-menu"></i></a> </div> </nav> <br> <div class="preloader-wrapper active container center-div" ng-show="loading"> <div class="spinner-layer spinner-red-only"> <div class="circle-clipper left"> <div class="circle"></div> </div> <div class="gap-patch"> <div class="circle"></div> </div> <div class="circle-clipper right"> <div class="circle"></div> </div> </div> </div> <div class="row container" ng-hide="loading"> <h5 class="light">Active Jobs</h5> <ul class="collection"> <a ng-repeat="(jobId,job) in createdJobs" class="collection-item pointer" ng-click="faculty.viewJob(jobId)"> {{job.jobName}} <!-- Add confirmation dialog --> <div class="secondary-content red-text pointer" ng-click="faculty.deleteJob(jobId); $event.stopPropagation()">Delete</div> </a> </ul> <a class="btn right" ng-click="faculty.showAll()">Show all Jobs</a> <br> <h5 class="light">Active Chat Rooms</h5> <ul class="collapsible" data-collapsible="accordion"> <li ng-repeat="(chatRoomId, chat) in chatRooms"> <div class="collapsible-header"> {{chat.chatRoomName}} <div class="secondary-content red-text pointer" ng-click="faculty.deleteChatRoom(chatRoomId); $event.stopPropagation()">Delete</div> </div> <div class="collapsible-body"> <p>{{chat.description}}</p> <div class="right-align" style="padding:0 16px 16px 16px"> <a class="btn" ng-click="faculty.openChatRoom(chatRoomId)">Open Room</a> </div> </div> </li> </ul> <a class="btn right" ng-click="faculty.showAllChatRooms()">Show all Chat Rooms</a> </div>'),a.put("views/jobs.html",'<nav> <div class="nav-wrapper container"> <a href="#" class="brand-logo">SFIP</a> <ul id="nav-mobile" class="right hide-on-med-and-down"> <li><a ng-click="jobs.logout()">Logout</a></li> </ul> <ul id="slide-out" class="side-nav fixed"> <div class="sidenav-profile center-align"> <img class="circle responsive-img" src="http://lorempixel.com/200/200"> <!-- <h6 class="black-text">Ankit Muchhala</h6> --> </div> <li><a ng-click="goTo(\'profile\')">Profile</a></li> <li><a ng-click="goTo(\'people\')">People</a></li> <li><a ng-click="goTo(\'chatRooms\')">Chat Rooms</a></li> <li><a ng-click="goTo(\'jobs\')">Jobs</a></li> </ul> <a href="#" data-activates="slide-out" class="button-collapse"><i class="mdi-navigation-menu"></i></a> </div> </nav> <div class="preloader-wrapper active container center-div" ng-show="loading"> <div class="spinner-layer spinner-red-only"> <div class="circle-clipper left"> <div class="circle"></div> </div> <div class="gap-patch"> <div class="circle"></div> </div> <div class="circle-clipper right"> <div class="circle"></div> </div> </div> </div> <div class="container" ng-hide="loading"> <br> <div class="row" style="margin: 8px 0 0 0"> <h5 class="light col s6" style="margin-bottom: 0">All Job Openings</h5> <div class="input-field col s6" style="margin: 0"> <input ng-model="search" id="search" type="text"> <label for="search">Search </label> </div> </div> <ul class="collapsible" data-collapsible="accordion"> <li ng-repeat="(key, job) in jobPostings | searchJobs:search"> <div class="collapsible-header">{{job.jobName}}</div> <div class="collapsible-body"> <p>{{job.description}}</p> <div class="right-align" style="padding: 16px"> <a class="btn" ng-click="jobs.applyForJob(key, job.jobName)" ng-if="!userType">Apply</a> </div> </div> </li> </ul> </div>'),a.put("views/main.html",'<!-- TODO:\n  1. Validate using Angular and Disable login button accordingly\n --> <div class="preloader-wrapper active container center-div" ng-show="loading"> <div class="spinner-layer spinner-red-only"> <div class="circle-clipper left"> <div class="circle"></div> </div> <div class="gap-patch"> <div class="circle"></div> </div> <div class="circle-clipper right"> <div class="circle"></div> </div> </div> </div> <div class="container" ng-hide="loading"> <div class="card-panel" style="max-width: 400px; height:350px;  position: absolute;\n    top:0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    margin: auto"> <form> <div class="row margin"> <div class="input-field col s12"> <i class="mdi-social-person-outline prefix"></i> <input ng-model="email" id="email" type="email" class="validate"> <label class="center-align" data-error="Invalid">Email</label> </div> </div> <div class="row margin"> <div class="input-field col s12"> <i class="mdi-action-lock-outline prefix"></i> <input id="password" ng-model="password" type="password"> <label for="password">Password</label> </div> </div> <!-- <div class="row">\n        <div class="input-field col s12 m12 l12  login-text">\n          <input type="checkbox" id="remember-me" />\n          <label for="remember-me">Remember me</label>\n        </div>\n      </div> --> <div class="row"> <div class="input-field col s12" ng-click="main.login()"> <a class="btn waves-effect waves-light col s12 red">Login</a> </div> </div> <div class="row"> <div class="input-field col s6 m6 l6"> <p class="margin medium-small pointer"><a ng-click="goToRegister()">Register</a></p> </div> <div class="input-field col s6 m6 l6"> <p class="margin right-align medium-small pointer"><a class="pointer" ng-click="main.goToReset()">Forgot password?</a></p> </div> </div> </form> </div> </div>'),a.put("views/people.html",'<nav> <div class="nav-wrapper container"> <a href="#" class="brand-logo">SFIP</a> <ul id="nav-mobile" class="right hide-on-med-and-down"> <li><a ng-click="people.logout()">Logout</a></li> </ul> <ul id="slide-out" class="side-nav fixed"> <div class="sidenav-profile center-align"> <img class="circle responsive-img" src="http://lorempixel.com/200/200"> <!-- <h6 class="black-text">Ankit Muchhala</h6> --> </div> <li><a ng-click="goTo(\'profile\')">Profile</a></li> <li><a ng-click="goTo(\'people\')">People</a></li> <li><a ng-click="goTo(\'chatRooms\')">Chat Rooms</a></li> <li><a ng-click="goTo(\'jobs\')">Jobs</a></li> </ul> <a href="#" data-activates="slide-out" class="button-collapse"><i class="mdi-navigation-menu"></i></a> </div> </nav> <div class="preloader-wrapper active container center-div" ng-show="loading"> <div class="spinner-layer spinner-red-only"> <div class="circle-clipper left"> <div class="circle"></div> </div> <div class="gap-patch"> <div class="circle"></div> </div> <div class="circle-clipper right"> <div class="circle"></div> </div> </div> </div> <div class="container" ng-hide="loading"> <br> <div class="row" style="margin: 8px 0 0 0"> <h5 class="light col s6" style="margin-bottom: 0">People</h5> <div class="input-field col s6" style="margin: 0"> <input ng-model="search" id="search" type="text"> <label for="search">Search </label> </div> </div> <ul class="collection"> <li class="collection-item" ng-repeat="(key, person) in allUsers | searchPeople:search"> <div>{{person.firstName}} {{person.lastName}} <a ng-click="people.viewProfile(person.email)" class="secondary-content pointer">View</a> </div> </li> </ul> </div>'),a.put("views/posting.html",'<nav> <div class="nav-wrapper container"> <a href="#" class="brand-logo">SFIP</a> <ul id="nav-mobile" class="right hide-on-med-and-down"> <li><a ng-click="logout()">Logout</a></li> </ul> <ul id="slide-out" class="side-nav fixed"> <div class="sidenav-profile center-align"> <img class="circle responsive-img" src="http://lorempixel.com/200/200"> <!-- <h6 class="black-text">Ankit Muchhala</h6> --> </div> <li><a ng-click="goTo(\'profile\')">Profile</a></li> <li><a ng-click="goTo(\'people\')">People</a></li> <li><a ng-click="goTo(\'chatRooms\')">Chat Rooms</a></li> <li><a ng-click="goTo(\'jobs\')">Jobs</a></li> </ul> <a href="#" data-activates="slide-out" class="button-collapse"><i class="mdi-navigation-menu"></i></a> </div> </nav> <br> <div class="preloader-wrapper active container center-div" ng-show="loading"> <div class="spinner-layer spinner-red-only"> <div class="circle-clipper left"> <div class="circle"></div> </div> <div class="gap-patch"> <div class="circle"></div> </div> <div class="circle-clipper right"> <div class="circle"></div> </div> </div> </div> <div class="row container" ng-hide="loading"> <h5 class="light">Active Jobs</h5> <ul class="collection"> <a ng-repeat="(jobId,job) in createdJobs" class="collection-item pointer" ng-click="posting.viewJob(jobId)"> {{job.jobName}} <!-- Add confirmation dialog --> <div class="secondary-content red-text pointer" ng-click="posting.deleteJob(jobId); $event.stopPropagation()">Delete</div> </a> </ul> <a class="btn right" ng-click="posting.showAll()">Show all Jobs</a> <br> <h5 class="light">Create a Job Posting</h5> <form class="col s12" id="postingForm"> <div class="row"> <div class="input-field col s6"> <input ng-model="jobName" id="jobName" type="text"> <label for="jobName">Job Name</label> </div> <div class="input-field col s6"> <input ng-model="positions" id="positions" type="number"> <label for="positions">Number of Openings</label> </div> </div> <div class="row"> <div class="input-field col s12"> <textarea id="description" ng-model="description" class="materialize-textarea"></textarea> <label for="description">Job Description</label> </div> </div> <div class="row"> <div class="input-field col s6"> <input id="email" type="email" ng-model="contactEmail" class="validate"> <label for="email" data-error="Invalid" data-success="Valid" class="center-align">Contact Email</label> </div> </div> <div class="row"> <div class="input-field col s6"> <input id="start" ng-model="startDate" name="date" type="text" onfocus="(this.type=\'date\')" onfocusout="(this.type=\'text\')"> <label for="start">Start Date</label> </div> <div class="input-field col s6"> <input id="end" ng-model="endDate" name="date" type="text" onfocus="(this.type=\'date\')" onfocusout="(this.type=\'text\')"> <label for="end">End Date</label> </div> </div> <div class="row"> <div class="input-field col s6"> <input ng-model="location" id="location" type="text"> <label for="location">Location</label> </div> <div class="input-field col s6"> <input id="deadline" ng-model="deadline" name="date" type="text" onfocus="(this.type=\'date\')" onfocusout="(this.type=\'text\')"> <label for="deadline">Last Date for Application</label> </div> </div> </form> <div class="right-align"> <div class="btn" ng-click="resetValues()">Reset</div> <div class="btn" ng-click="posting.createJob()">Create</div> </div> </div>'),a.put("views/profile.html",'<nav> <div class="nav-wrapper container"> <a href="#" class="brand-logo">SFIP</a> <ul id="nav-mobile" class="right hide-on-med-and-down"> <li><a ng-click="profile.logout()">Logout</a></li> </ul> <ul id="slide-out" class="side-nav fixed"> <div class="sidenav-profile center-align"> <img class="circle responsive-img" src="http://lorempixel.com/200/200"> <!-- <h6 class="black-text">{{firstName}} {{lastName}}</h6> --> </div> <li><a ng-click="goTo(\'profile\')">Profile</a></li> <li><a ng-click="goTo(\'people\')">People</a></li> <li><a ng-click="goTo(\'chatRooms\')">Chat Rooms</a></li> <li><a ng-click="goTo(\'jobs\')">Jobs</a></li> </ul> <a href="#" data-activates="slide-out" class="button-collapse"><i class="mdi-navigation-menu"></i></a> </div> </nav> <div class="preloader-wrapper active container center-div" ng-show="loading"> <div class="spinner-layer spinner-red-only"> <div class="circle-clipper left"> <div class="circle"></div> </div> <div class="gap-patch"> <div class="circle"></div> </div> <div class="circle-clipper right"> <div class="circle"></div> </div> </div> </div> <div class="container" ng-hide="loading"> <br> <h5 class="light">Profile</h5> <br> <div class="row valign-wrapper"> <div class="col s2"> <img src="http://lorempixel.com/200/200" alt="" class="circle responsive-img"> <!-- notice the "circle" class --> </div> <div class="col s10"> <h5>{{firstName}} {{lastName}}</h5> <h6>{{type}}</h6> </div> </div> <form class="col s12" style="padding: 0"> <div class="row"> <div class="input-field col s12"> <input ng-model="institute" ng-blur="profile.updateProfile(\'institute\')" id="institute" type="text"> <label class="active" for="institute">Institute</label> </div> </div> <div class="row"> <div class="input-field col s12"> <textarea id="about" ng-model="about" ng-blur="profile.updateProfile(\'about\')" class="materialize-textarea"></textarea> <label class="active" for="about">About</label> </div> </div> <div class="row"> <div class="input-field col s6"> <input ng-model="location" ng-blur="profile.updateProfile(\'location\')" id="location" type="text"> <label class="active" for="location">Location</label> </div> <div class="input-field col s6"> <input ng-model="contact" ng-blur="profile.updateProfile(\'contact\')" id="contact" type="text"> <label class="active" for="contact">Contact</label> </div> </div> <div class="row" style="padding: 0 10.5px 0 10.5px"> <h6 class="grey-text">Areas of Interest</h6> <ul class="collection"> <li ng-repeat="(key, item) in interests" class="collection-item">{{item.interest}} <a class="secondary-content pointer" ng-click="profile.removeItem(key, \'interests\')">Remove</a> </li> </ul> <div class="input-field col s12"> <input ng-model="interest" id="interest" type="text"> <label for="interest">Add Interest</label> </div> <div class="btn right" ng-click="profile.updateProfile(\'interest\')">Add</div> </div> <div class="row" style="padding: 0 10.5px 0 10.5px"> <h6 class="grey-text">Publications</h6> <ul class="collection"> <li ng-repeat="(key, item) in publications" class="collection-item">{{item.publication}} <a class="pointer secondary-content" ng-click="profile.removeItem(key, \'publications\')">Remove</a> </li> </ul> <div class="input-field col s12"> <input ng-model="publication" id="publication" type="text"> <label for="publication">Add Publication</label> </div> <div class="btn right" ng-click="profile.updateProfile(\'publication\')">Add</div> </div> </form> </div>'),a.put("views/register.html",'<div class="container"> <div class="card-panel" style="max-width: 400px; height:520px;  position: absolute;\n    top:0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    margin: auto"> <form> <div class="row margin"> <div class="input-field col s12"> <input class="validate" ng-model="email" id="email" type="email"> <label for="email" data-error="Invalid" data-success="right" class="center-align">Email</label> </div> </div> <div class="row margin"> <div class="input-field col s12"> <input ng-model="firstName" id="firstName" type="text" required> <label class="center-align">First Name</label> </div> </div> <div class="row margin"> <div class="input-field col s12"> <input ng-model="lastName" id="lastName" type="text" required> <label class="center-align">Last Name</label> </div> </div> <div class="row margin"> <div class="input-field col s12"> <input ng-model="institute" id="institute" type="text" required> <label class="center-align">Institute Name</label> </div> </div> <div class="row margin"> <div class="col s12 center-align"> <input name="group1" ng-model="userType" type="radio" id="test1" class="with-gap" value="student"> <label for="test1">Student</label> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input name="group1" ng-model="userType" type="radio" id="test2" class="with-gap" value="professor"> <label for="test2">Professor</label> </div> </div> <div class="row"> <div class="input-field col s12" ng-click="register.signup()"> <a class="btn waves-effect waves-light col s12 red">Register</a> </div> </div> </form> </div> </div>'),a.put("views/resetpassword.html",'<div class="container"> <div class="card-panel" style="max-width: 400px; height:480px;  position: absolute;\n    top:0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    margin: auto"> <form> <div class="row margin"> <div class="input-field col s12"> <input id="email" ng-model="email" type="email" class="validate"> <label for="email">Email</label> </div> </div> <div class="row margin"> <div class="input-field col s12"> <input id="oldPassword" ng-model="oldPassword" type="password"> <label for="oldPassword">Old Password</label> </div> </div> <div class="row margin"> <div class="input-field col s12"> <input id="newPassword" ng-model="newPassword" type="password"> <label for="newPassword">New Password</label> </div> </div> <div class="row margin"> <div class="input-field col s12"> <input id="confirmNew" ng-model="confirmNew" type="password"> <label for="confirmNew">Confirm New Password</label> </div> </div> <div class="row"> <div class="input-field col s12" ng-click="changePass()"> <a class="btn waves-effect waves-light col s12 red">Change Password</a> </div> </div> </form> </div> </div>'),a.put("views/student.html",'<nav> <div class="nav-wrapper container"> <a href="#" class="brand-logo">SFIP</a> <ul id="nav-mobile" class="right hide-on-med-and-down"> <li><a ng-click="student.logout()">Logout</a></li> </ul> <ul id="slide-out" class="side-nav fixed"> <div class="sidenav-profile center-align"> <img class="circle responsive-img" src="http://lorempixel.com/200/200"> <!-- <h6 class="black-text">Ankit Muchhala</h6> --> </div> <li><a ng-click="goTo(\'profile\')">Profile</a></li> <li><a ng-click="goTo(\'people\')">People</a></li> <li><a ng-click="goTo(\'chatRooms\')">Chat Rooms</a></li> <li><a ng-click="goTo(\'jobs\')">Jobs</a></li> </ul> <a href="#" data-activates="slide-out" class="button-collapse"><i class="mdi-navigation-menu"></i></a> </div> </nav> <div class="preloader-wrapper active container center-div" ng-show="loading"> <div class="spinner-layer spinner-red-only"> <div class="circle-clipper left"> <div class="circle"></div> </div> <div class="gap-patch"> <div class="circle"></div> </div> <div class="circle-clipper right"> <div class="circle"></div> </div> </div> </div> <div class="container" ng-hide="loading"> <br> <h5 class="light">Job Postings</h5> <ul class="collapsible" data-collapsible="accordion"> <li ng-repeat="(key, job) in jobs"> <div class="collapsible-header">{{job.jobName}}</div> <div class="collapsible-body"> <p>{{job.description}}</p> <div class="right-align" style="padding:0 16px 16px 16px"> <a class="btn" ng-click="student.applyForJob(key, job.jobName)">Apply</a> </div> </div> </li> </ul> <br> <h5 class="light">Chat Rooms</h5> <ul class="collapsible" data-collapsible="accordion"> <li ng-repeat="(key, chatRoom) in chatRooms"> <div class="collapsible-header">{{chatRoom.chatRoomName}}</div> <div class="collapsible-body"> <p>{{chatRoom.description}}</p> <div class="right-align" style="padding:0 16px 16px 16px"> <a class="btn" ng-click="student.openChatRoom(key, chatRoom)">Join</a> </div> </div> </li> </ul> <br> <h5 class="light">Your Job Applications</h5> <ul class="collection"> <a ng-repeat="(appId,app) in applications" class="collection-item pointer black-text" ng-click=""> {{app.jobName}} <div class="secondary-content grey-text pointer" ng-click="posting.deleteJob(jobId); $event.stopPropagation()">{{app.status ? app.status : \'pending\'}}</div> </a> </ul>  </div>'),a.put("views/viewjob.html",'<nav> <div class="nav-wrapper container"> <a href="#" class="brand-logo">SFIP</a> <ul id="nav-mobile" class="right hide-on-med-and-down"> <li><a ng-click="logout()">Logout</a></li> </ul> <ul id="slide-out" class="side-nav fixed"> <div class="sidenav-profile center-align"> <img class="circle responsive-img" src="http://lorempixel.com/200/200"> <!-- <h6 class="black-text">Ankit Muchhala</h6> --> </div> <li><a ng-click="goTo(\'profile\')">Profile</a></li> <li><a ng-click="goTo(\'people\')">People</a></li> <li><a ng-click="goTo(\'chatRooms\')">Chat Rooms</a></li> <li><a ng-click="goTo(\'jobs\')">Jobs</a></li> </ul> <a href="#" data-activates="slide-out" class="button-collapse"><i class="mdi-navigation-menu"></i></a> </div> </nav> <br> <div class="container"> <h5 class="light">Applications</h5> <ul class="collapsible" data-collapsible="accordion"> <li ng-repeat="(key, application) in applications" ng-show="!application.status"> <div class="collapsible-header">{{application.contactEmail}} <div class="secondary-content"> <a class="green-text" ng-click="viewJob.acceptApplication(key); $event.stopPropagation()">Accept</a> &nbsp;&nbsp;&nbsp; <a class="red-text" ng-click="viewJob.rejectApplication(key); $event.stopPropagation()">Reject</a> </div> </div> <div class="collapsible-body"> <p>{{application.letter}}</p> <p style="padding-top:0"><a href="">Attachment</a></p> </div> </li> </ul> <br> <h5 class="light">Accepted</h5> <ul class="collapsible" data-collapsible="accordion"> <li ng-repeat="(key, application) in applications" ng-show="application.status === \'accept\'"> <div class="collapsible-header">{{application.contactEmail}}</div> <div class="collapsible-body"> <p>{{application.letter}}</p> <p style="padding-top:0"><a href="">Attachment</a></p> </div> </li> </ul> <br> <h5 class="light">Rejected</h5> <ul class="collapsible" data-collapsible="accordion"> <li ng-repeat="(key, application) in applications" ng-show="application.status === \'reject\'"> <div class="collapsible-header">{{application.contactEmail}}</div> <div class="collapsible-body"> <p>{{application.letter}}</p> <p style="padding-top:0"><a href="">Attachment</a></p> </div> </li> </ul> </div>'),
a.put("views/viewprofile.html",'<nav> <div class="nav-wrapper container"> <a href="#" class="brand-logo">SFIP</a> <ul id="nav-mobile" class="right hide-on-med-and-down"> <li><a ng-click="logout()">Logout</a></li> </ul> <ul id="slide-out" class="side-nav fixed"> <div class="sidenav-profile center-align"> <img class="circle responsive-img" src="http://lorempixel.com/200/200"> <!-- <h6 class="black-text">Ankit Muchhala</h6> --> </div> <li><a ng-click="goTo(\'profile\')">Profile</a></li> <li><a ng-click="goTo(\'people\')">People</a></li> <li><a ng-click="goTo(\'chatRooms\')">Chat Rooms</a></li> <li><a ng-click="goTo(\'jobs\')">Jobs</a></li> </ul> <a href="#" data-activates="slide-out" class="button-collapse"><i class="mdi-navigation-menu"></i></a> </div> </nav> <!-- <div class="preloader-wrapper active container center-div" ng-show="loading">\n  <div class="spinner-layer spinner-red-only">\n    <div class="circle-clipper left">\n      <div class="circle"></div>\n    </div>\n    <div class="gap-patch">\n      <div class="circle"></div>\n    </div>\n    <div class="circle-clipper right">\n      <div class="circle"></div>\n    </div>\n  </div>\n</div> --> <div class="container"> <br> <h5 class="light">Profile</h5> <br> <div class="row valign-wrapper"> <div class="col s2"> <img src="http://lorempixel.com/200/200" alt="" class="circle responsive-img"> <!-- notice the "circle" class --> </div> <div class="col s10"> <h5>{{firstName}} {{lastName}}</h5> <h6>{{type}}</h6> </div> </div> <div class="row"> <div class="col s12"> <div class="card"> <div class="card-content black-text"> <span class="card-title">About</span> <p class="grey-text" style="margin-bottom: 8px"><b>Institute:</b> {{institute}}</p> <p>{{about}}</p> </div> </div> </div> </div> <h6 class="grey-text">Areas of Interest</h6> <ul class="collection"> <li ng-repeat="item in interests" class="collection-item">{{item.interest}} </li> </ul> <br> <h6 class="grey-text">Publications</h6> <ul class="collection"> <li ng-repeat="item in publications" class="collection-item">{{item.publication}} </li> </ul> </div>')}]);